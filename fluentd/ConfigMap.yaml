---
apiVersion: v1
kind: ConfigMap
metadata:
  name: fluentd-conf-d
  namespace: kube-system
data:
  crawler.conf: |
    <match kubernetes.var.log.containers.**kube-system**>
      @type null
    </match>

    <match kubernetes.var.log.containers.**rook-ceph**>
      @type null
    </match>

    <match kubernetes.var.log.containers.**csi-cephfsplugin**>
      @type null
    </match>

    <match kubernetes.var.log.containers.**csi-rbdplugin**>
      @type null
    </match>

    <match kubernetes.var.log.containers.**cilium**>
      @type null
    </match>

    <match **kube-apiserver**>
      @type null
    </match>

    <match **kubelet**>
      @type null
    </match>

    <match **docker**>
      @type null
    </match>

    <filter kubernetes.var.log.containers.**>
      @type parser
      key_name log
      reserve_data true
      remove_key_name_field true
      <parse>
        @type json
      </parse>
    </filter>
