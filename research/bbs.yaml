resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 200m
    memory: 256Mi

imagePullSecrets: registry

restartPolicy: OnFailure

hostAliases:
  - ip: "172.20.93.112"
    hostnames:
      - "corpus.ncsoft.com"

image: registry.nlp-utils/crawler:latest

environmentVariables:
  - name: ELASTIC_SEARCH_AUTH
    valueFrom:
      secretKeyRef:
        name: elasticsearch-auth
        key: http_auth

schedule:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 3
  successfulJobsHistoryLimit: 2

jobs:
  - name: bbs-mlbpark-kbo
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_KBO)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "mlbpark-kbo"
      - "--sleep"
      - "20"
    subSategory:
      - "''"

  - name: bbs-mlbpark-mlb
    schedule: "10,40 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_MLB)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "mlbpark-mlb"
      - "--sleep"
      - "20"
    subSategory:
      - "''"

  - name: bbs-mlbpark-bullpen
    schedule: "20,50 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_BULLPEN)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "mlbpark-bullpen"
      - "--sleep"
      - "20"
    subSategory:
      - "''"

  - name: bbs-ruliweb
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_RULIWEB)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "ruliweb"
      - "--sleep"
      - "20"
    subSategory:
      - "''"

  - name: bbs-inven-lineagem
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_INVEN)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "inven-lineagem"
      - "--sleep"
      - "20"
      - "--page-range"
      - "1~20"
      - "--page-step"
      - "1"
    subSategory:
      - "''"

  - name: bbs-lineagem
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_LINEAGEM)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "lineagem"
      - "--sleep"
      - "20"
      - "--page-range"
      - "1~100"
      - "--page-step"
      - "1"
    subSategory:
      - "''"

  - name: bbs-lineage2m
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_LINEAGE2M)
    configMapRef: bbs
    args:
      - "python3"
      - "module/web_news/web_news.py"
      - "--skip-check-history"
      - "--overwrite"
      - "--category"
      - "bbs"
      - "--job-id"
      - "lineage2m"
      - "--sleep"
      - "20"
      - "--page-range"
      - "1~100"
      - "--page-step"
      - "1"
    subSategory:
      - "''"
