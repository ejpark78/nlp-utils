resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 200m
    memory: 256Mi

imagePullSecrets: registry

restartPolicy: OnFailure

hostAliases:
  - ip: "172.20.93.112"
    hostnames:
      - "corpus.ncsoft.com"

image: registry.nlp-utils/crawler:2

environmentVariables:
  - name: ELASTIC_SEARCH_AUTH
    valueFrom:
      secretKeyRef:
        name: elasticsearch-auth
        key: http_auth

schedule:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 3
  successfulJobsHistoryLimit: 2

jobs:
  - name: naver-kin-question-list
    schedule: "0 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: ""
    configMapRef: naver
    args:
      - "python3"
      - "-m"
      - "crawler.naver.kin.kin"
      - "--config"
      - "/config/naver/kin.yaml"
      - "--question-list"
      - "--sleep"
      - "20"

  - name: naver-kin-answer-list
    schedule: "20 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: ""
    configMapRef: naver
    args:
      - "python3"
      - "-m"
      - "crawler.naver.kin.kin"
      - "--config"
      - "/config/naver/kin.yaml"
      - "--answer-list"
      - "--sleep"
      - "20"

  - name: naver-kin-detail-question
    schedule: "40 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: ""
    configMapRef: naver
    args:
      - "python3"
      - "-m"
      - "crawler.naver.kin.kin"
      - "--config"
      - "/config/naver/kin.yaml"
      - "--question"
      - "--sleep"
      - "20"

  - name: naver-kin-detail-answer
    schedule: "50 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: ""
    configMapRef: naver
    args:
      - "python3"
      - "-m"
      - "crawler.naver.kin.kin"
      - "--config"
      - "/config/naver/kin.yaml"
      - "--answer"
      - "--sleep"
      - "20"
