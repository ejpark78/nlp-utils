image: registry.nlp-utils/crawler:live
gitImage: registry.nlp-utils/alpine/git:v2.30.0

imagePullSecrets: registry

restartPolicy: Never

resources:
  requests:
    cpu: 200m
    memory: 200Mi
  limits:
    cpu: 200m
    memory: 200Mi

hostAliases:
  - ip: "172.20.93.112"
    hostnames:
      - "corpus.ncsoft.com"
  - ip: "172.20.92.245"
    hostnames:
      - "galadriel02.korea.ncsoft.corp"

configMap:
  gitSync:
    name: config-sync
    repo: "http://galadriel02.korea.ncsoft.corp/crawler/config.git"
    branch: "live"
  elasticsearch:
    authName: es-auth
    host: "https://corpus.ncsoft.com:9200"

schedule:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  successfulJobsHistoryLimit: 1

jobs:
  - name: mlbpark-kbo
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_KBO)
    configMapRef: bbs
    args:
      - "python3"
      - "-m"
      - "crawler.web_news.web_news"
      - "--overwrite"
      - "--config"
      - "/config/bbs/mlbpark-kbo.yaml"
      - "--sleep"
      - "20"

  - name: mlbpark-mlb
    schedule: "10,40 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_MLB)
    configMapRef: bbs
    args:
      - "python3"
      - "-m"
      - "crawler.web_news.web_news"
      - "--overwrite"
      - "--config"
      - "/config/bbs/mlbpark-mlb.yaml"
      - "--sleep"
      - "20"

  - name: mlbpark-bullpen
    schedule: "20,50 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_MLBPARK_BULLPEN)
    configMapRef: bbs
    args:
      - "python3"
      - "-m"
      - "crawler.web_news.web_news"
      - "--overwrite"
      - "--config"
      - "/config/bbs/mlbpark-bullpen.yaml"
      - "--sleep"
      - "20"

  - name: ruliweb
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_RULIWEB)
    configMapRef: bbs
    args:
      - "python3"
      - "-m"
      - "crawler.web_news.web_news"
      - "--overwrite"
      - "--config"
      - "/config/bbs/ruliweb.yaml"
      - "--sleep"
      - "20"

  - name: inven-lineagem
    schedule: "0,30 * * * *"
    environmentVariables:
      - name: ELASTIC_SEARCH_INDEX
        value: $(INDEX_INVEN)
    configMapRef: bbs
    args:
      - "python3"
      - "-m"
      - "crawler.web_news.web_news"
      - "--overwrite"
      - "--config"
      - "/config/bbs/inven-lineagem.yaml"
      - "--sleep"
      - "20"
      - "--page-range"
      - "1~20"
      - "--page-step"
      - "1"

#  - name: lineagem
#    schedule: "0,30 * * * *"
#    environmentVariables:
#      - name: ELASTIC_SEARCH_INDEX
#        value: $(INDEX_LINEAGEM)
#    configMapRef: bbs
#    args:
#      - "python3"
#      - "-m"
#      - "crawler.web_news.web_news"
#      - "--overwrite"
#      - "--config"
#      - "/config/bbs/lineagem.yaml"
#      - "--sleep"
#      - "20"
#      - "--page-range"
#      - "1~100"
#      - "--page-step"
#      - "1"
#
#  - name: lineage2m
#    schedule: "0,30 * * * *"
#    environmentVariables:
#      - name: ELASTIC_SEARCH_INDEX
#        value: $(INDEX_LINEAGE2M)
#    configMapRef: bbs
#    args:
#      - "python3"
#      - "-m"
#      - "crawler.web_news.web_news"
#      - "--overwrite"
#      - "--config"
#      - "/config/bbs/lineage2m.yaml"
#      - "--sleep"
#      - "20"
#      - "--page-range"
#      - "1~100"
#      - "--page-step"
#      - "1"
