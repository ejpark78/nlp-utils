---
jobs:
  - index: raw-daejon-{year}
    tag: 대전일보
    article:
      document_id:
        type: query
        frame: '{pk_no}'
    list:
      - category: 정치
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=03_000
      - category: 경제/과학
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=06_000
      - category: 사회
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=05_000
      - category: 문화
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=14_000
      - category: 포토뉴스
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=41_000
      - category: 라이프
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=12_000
      - category: 지역
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=02_000
      - category: 사람들
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=11_000
      - category: 기획
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=33_000
      - category: 스포츠
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=07_000
      - category: 연예
        url_frame: http://www.daejonilbo.com/r_newslist.asp?page={page}&gubun=37_000&

# crawling 과정에서 추출하는 정보
parsing:
  version: v2021-03-17
  parser: html5lib

  # 전체 html 에서 추출해야하는 전체 tag 목록
  trace:
    - select: div#newslist_main_news2 li

  # 기사 목록에서 추출해야하는 하나의 기사 정보
  list:
    - key: url
      value:
        - select: a
      type: href
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date

  # 기사 본문에서 추출해야하는 tag 정보
  article:
    - key: raw
      value:
        - name: html
      remove:
        - name: script
        - name: style
        - name: comment
      type: html
    - key: title
      value:
        - select: div#newsitem_head h1
      type: text
    - key: sub_title
      value:
        - select: div#newsitem_head h2
      type: text
    - key: date
      value:
        - select: '#newsitem_head > h5 > table > tbody > tr > td:nth-child(1) > b'
      replace:
        - from: "^.*편집 "
          to: ''
        - from: " "
          to: 'T'
      type: text
      type_convert: date
      value_type: single
    - key: content
      value:
        - select: div#article
      type: text
      value_type: merge
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date
