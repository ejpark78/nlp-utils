---
jobs:
  - index: raw-joongdo-{year}
    tag: 중도일보
    article:
      document_id:
        frame: '{key}'
        type: query
    list:
      - category: 전체기사
        url_frame: http://www.joongdo.co.kr/web/list_news.php?page={page}

# crawling 과정에서 추출하는 정보
parsing:
  parser: html5lib

  # 전체 html 에서 추출해야하는 전체 tag 목록
  trace:
    - select: section.newlist_wrap article.newlist

  # 기사 목록에서 추출해야하는 하나의 기사 정보
  list:
    - key: url
      value:
        - select: h2.newlist-title a
      type: href
    - key: title
      value:
        - select: h2.newlist-title
      type: text
    - key: date
      value:
        - select: span.date
      type: text
      type_convert: date
      value_type: single
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date

  # 기사 본문에서 추출해야하는 tag 정보
  article:
    - key: raw
      value:
        - name: html
      remove:
        - name: script
        - name: style
        - name: comment
      type: html
    - key: title
      value:
        - select: p.v-title1
      type: text
      value_type: single
    - key: date
      value:
        - select: ul.view-term
      replace:
        - from: '^.*승인 '
          to: ''
        - from: '^.*수정 '
          to: ''
      type: text
      type_convert: date
    - key: content
      value:
        - select: div[itemprop=articleBody]
      type: text
      value_type: merge
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date
