---
jobs:
  - index: raw-kwnews-{year}
    article:
      document_id:
        frame: '{aid}'
        type: query
    list:
      - category: 경제
        url_frame: http://www.kwnews.co.kr/News/List/?s=401&page={page}
      - category: 라이프
        url_frame: http://www.kwnews.co.kr/News/List/?s=2201&page={page}
      - category: 문화
        url_frame: http://www.kwnews.co.kr/News/List/?s=601&page={page}
      - category: 지역
        url_frame: http://www.kwnews.co.kr/News/List/?s=2001&page={page}
      - category: 정치
        url_frame: http://www.kwnews.co.kr/News/List/?s=101&page={page}
      - category: 사회
        url_frame: http://www.kwnews.co.kr/News/List/?s=501&page={page}
      - category: 스포츠
        url_frame: http://www.kwnews.co.kr/News/List/?s=701&page={page}
      - category: 교육
        url_frame: http://www.kwnews.co.kr/News/List/?s=2101&page={page}

# crawling 과정에서 추출하는 정보
parsing:
  version: v2021-03-17
  parser: html5lib

  # 전체 html 에서 추출해야하는 전체 tag 목록
  trace:
    - select: body > table > tbody > tr > td > table:nth-child(5) > tbody > tr:nth-child(3) > td > table > tbody > tr:nth-child(3) > td:nth-child(1) > table > tbody

  # 기사 목록에서 추출해야하는 하나의 기사 정보
  list:
    - key: title
      value:
        - name: a
      type: text
    - key: url
      value:
        - name: a
      type: href
    - key: date
      value:
        - select: body > table > tbody > tr > td > table:nth-child(5) > tbody > tr:nth-child(3) > td > table > tbody > tr:nth-child(3) > td:nth-child(1) > table > tbody > tr:nth-child(2) > td > table > tbody > tr > td:nth-child(2)
      type: text
      convert:
        to: date
        merge: single
    - key: '@curl_date'
      value:
        - const: DATE_NOW

  # 기사 본문에서 추출해야하는 tag 정보
  article:
    - key: raw
      value:
        - name: html
      remove:
        - name: script
        - name: style
        - name: comment
      type: html
    - key: title
      value:
        - select: body > table > tbody > tr > td > table:nth-child(5) > tbody > tr:nth-child(2) > td > table > tbody > tr:nth-child(1) > td > div.SectionTopBoxWrap2 > p.nViewTitle
      type: text
    - key: date
      value:
        - select: body > table > tbody > tr > td > table:nth-child(5) > tbody > tr:nth-child(2) > td > table > tbody > tr:nth-child(1) > td > div.nBox2 > table > tbody > tr > td:nth-child(4) > p
      type: text
      convert:
        to: date
        merge: single
      replace:
        - from: '\(.*$'
          to: ''
        - from: ' '
          to: ''
    - key: content
      value:
        - select: div#kwnews_body
      type: text
    - key: '@curl_date'
      value:
        - const: DATE_NOW
