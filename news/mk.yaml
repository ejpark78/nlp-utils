---
jobs:
  - index: raw-mk-{year}
    article:
      document_id:
        replace:
          - from: '\/+$'
            to: ''
          - from: '^.*\/'
            to: ''
        type: path
        
    args:
      page_range: "0~100"

    list:
      - category: 경제
        url_frame: https://www.mk.co.kr/news/economy/?page={page}
        encoding: 'euc-kr'
      - category: 기업
        url_frame: https://www.mk.co.kr/news/business/?page={page}
        encoding: 'euc-kr'
      - category: 사회
        url_frame: https://www.mk.co.kr/news/society/?page={page}
        encoding: 'euc-kr'
      - category: 국제
        url_frame: https://www.mk.co.kr/news/world/?page={page}
        encoding: 'euc-kr'
      - category: 부동산
        url_frame: https://www.mk.co.kr/news/realestate/?page={page}
        encoding: 'euc-kr'
      - category: 증권
        url_frame: https://www.mk.co.kr/news/stock/?page={page}
        encoding: 'euc-kr'
      - category: 정치
        url_frame: https://www.mk.co.kr/news/politics/?page={page}
        encoding: 'euc-kr'
      - category: IT/과학
        url_frame: https://www.mk.co.kr/news/it/?page={page}
        encoding: 'euc-kr'
      - category: 문화
        url_frame: https://www.mk.co.kr/news/culture/?page={page}
        encoding: 'euc-kr'
      - category: 암호화폐
        url_frame: https://www.mk.co.kr/news/crypto-currency/?page={page}
        encoding: 'euc-kr'
      - category: 스포츠/야구
        url_frame: https://www.mk.co.kr/sports/baseball/?page={page}
        encoding: 'euc-kr'
      - category: 스포츠/축구
        url_frame: https://www.mk.co.kr/sports/football/?page={page}
        encoding: 'euc-kr'

# crawling 과정에서 추출하는 정보
parsing:
  version: v2021-03-17
  parser: html5lib

  # 전체 html 에서 추출해야하는 전체 tag 목록
  trace:
    - select: dl.article_list

  # 기사 목록에서 추출해야하는 하나의 기사 정보
  list:
    - key: title
      value:
        - select: dt.tit a
      type: text
    - key: url
      value:
        - select: dt.tit a
      type: href
    - key: date
      value:
        - select: span.date
      type: text
      type_convert: date
      value_type: single
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date

  # 기사 본문에서 추출해야하는 tag 정보
  article:
    - key: raw
      value:
        - name: html
      remove:
        - name: script
        - name: style
        - name: comment
      type: html
    - key: title
      value:
        - select: h1.top_title
      type: text
      value_type: single
    - key: date
      value:
        - select: li.lasttime
      type: text
      type_convert: date
      value_type: single
      replace:
        - from: '^.*입력 : '
          to: ''
        - from: '^.*수정 : '
          to: ''
    - key: content
      value:
        - select: article.viewBox
      type: text
      value_type: merge
    - key: '@curl_date'
      value:
        - const: DATE_NOW
      type: text
      type_convert: date
