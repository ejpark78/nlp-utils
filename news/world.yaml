image: registry.nlp-utils/crawler:live
gitImage: registry.nlp-utils/alpine/git:v2.30.0

imagePullSecrets: registry

restartPolicy: Never

resources:
  requests:
    cpu: 200m
    memory: 300Mi
  limits:
    cpu: 200m
    memory: 300Mi

hostAliases:
  - ip: "172.20.93.112"
    hostnames:
      - "corpus.ncsoft.com"
  - ip: "172.20.92.245"
    hostnames:
      - "galadriel02.korea.ncsoft.corp"

configMap:
  gitSync:
    name: config-sync
    repo: "http://galadriel02.korea.ncsoft.corp/crawler/config.git"
    branch: "live"
  elasticsearch:
    authName: es-auth
    host: "https://corpus.ncsoft.com:9200"
  envFrom: news

schedule:
  concurrencyPolicy: Forbid
  failedJobsHistoryLimit: 1
  successfulJobsHistoryLimit: 1

args:
  - "python3"
  - "-m"
  - "crawler.web_news.web_news"
  - "--sleep"
  - "10"

jobs:
  - name: reuters
    schedule: "10 * * * *"
    index: "raw-reuters-{year}"
    args:
      - "--config"
      - "/config/world_news/reuters.yaml"

  - name: upi
    schedule: "20 * * * *"
    index: "raw-upi-{year}"
    args:
      - "--config"
      - "/config/world_news/upi.yaml"
      - "--page-range"
      - "1~7"

  - name: 47news
    schedule: "30 * * * *"
    index: "raw-47news-{year}"
    args:
      - "--config"
      - "/config/world_news/47news.yaml"

  - name: belga
    schedule: "30 * * * *"
    index: "raw-belga-{year}"
    args:
      - "--config"
      - "/config/world_news/belga.yaml"

  - name: afp
    schedule: "30 * * * *"
    index: "raw-afp-{year}"
    args:
      - "--config"
      - "/config/world_news/afp.yaml"

  - name: bbc
    schedule: "0 * * * *"
    index: "raw-bbc-{year}"
    args:
      - "--config"
      - "/config/world_news/bbc.yaml"
      - "--page-range"
      - "1~50"

  - name: xinhuanet
    schedule: "0 * * * *"
    index: "raw-xinhuanet-{year}"
    args:
      - "--config"
      - "/config/world_news/xinhuanet.yaml"
