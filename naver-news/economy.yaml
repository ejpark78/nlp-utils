---
jobs:
  - index: crawler-naver-economy-{year}
    article:
      document_id:
        frame: '{oid}-{aid}'
        type: query
    list:
      - category: 경제/증권
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=258&listType=title&date={date}&page={page}
      - category: 경제/금융
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=259&listType=title&date={date}&page={page}
      - category: 경제/부동산
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=260&listType=title&date={date}&page={page}
      - category: 경제/산업/재계
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=261&listType=title&date={date}&page={page}
      - category: 경제/글로벌 경제
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=262&listType=title&date={date}&page={page}
      - category: 경제/경제 일반
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=263&listType=title&date={date}&page={page}
      - category: 경제/생활경제
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=310&listType=title&date={date}&page={page}
      - category: 경제/중기/벤처
        date_format: '%Y%m%d'
        url_frame: https://news.naver.com/main/list.nhn?mode=LS2D&mid=shm&sid1=101&sid2=771&listType=title&date={date}&page={page}
parsing:
  version: v2021-03-11
  descriptions:
    article: 기사 본문에서 추출해야하는 tag 정보
    list: 기사 목록에서 추출해야하는 하나의 기사 정보
    trace: 전체 html 에서 추출해야하는 전체 tag 목록
  parser: html5lib
  trace:
    - select: div.list_body.newsflash_body li
  list:
    - key: raw_list
      value: [ ]
      type: html
    - key: title
      value:
        - select: a
      type: text
    - key: url
      value:
        - select: a
      type: href
    - key: date
      value:
        - select: span.date
      type: text
      convert:
        to: date
      value_type: single
    - key: '@curl_date'
      value:
        - const: DATE_NOW
  article:
    - key: raw
      value: [ ]
      type: html
      remove:
        - name: script
        - name: style
        - name: comment
    - key: title
      value:
        - select: div.article_info h3#articleTitle
      type: text
    - key: date
      value:
        - select: div.article_info span.t11
      type: text
      convert:
        to: date
      value_type: single
    - key: content
      value:
        - select: div#articleBodyContents
      type: text
    - key: '@curl_date'
      value:
        - const: DATE_NOW
pipeline:
  - key: source
    column: raw_list
    value:
      - select: span.writing
    type: text
  - key: source_section
    column: raw
    value:
      - select: div.guide_categorization em.guide_categorization_item
    type: text
  - key: paper
    column: raw
    comment: 지면 정보
    value:
      - select: div.article_info span.sponsor_newspaper
    type: text
    remove:
      - select: i.picon
  - key: source_url
    column: raw
    comment: 출처
    value:
      - select: div.sponsor a
    type: href
    value_type: single
  - key: image_list.image
    column: raw
    value:
      - select: span.end_photo_org img
    type: src
  - key: image_list.caption
    column: raw
    value:
      - select: span.end_photo_org em.img_desc
    type: text
    delete: true
  - key: vod
    column: raw
    value:
      - select: div#articleBodyContents iframe
    type: html
